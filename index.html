<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IronPulse Fitness</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="transitions.css">
    <link rel="stylesheet" href="feedback.css">
    <link rel="stylesheet" href="responsive.css">
    <link rel="stylesheet" href="accessibility.css">
    <link rel="icon" type="image/svg+xml" href="logo.svg">
</head>
<body>
    <a href="#main-content" class="skip-to-content">Zum Inhalt springen</a>
    
    <div id="app">
        <header class="app-header" role="banner">
            <div class="logo">
                <img src="logo.svg" alt="IronPulse Logo" class="logo-img">
                <h1 class="logo-text">IRONPULSE</h1>
            </div>
            <div class="user-profile" id="user-profile">
                <div class="avatar" id="user-avatar" aria-label="Benutzerprofil öffnen"></div>
                <span class="username" id="username">User</span>
                <div class="user-dropdown" id="user-dropdown" role="menu" aria-hidden="true">
                    <div class="user-dropdown-item" id="profile-btn" role="menuitem" tabindex="-1">Profil</div>
                    <div class="user-dropdown-item" id="settings-btn" role="menuitem" tabindex="-1">Einstellungen</div>
                    <div class="user-dropdown-item" id="logout-btn" role="menuitem" tabindex="-1">Abmelden</div>
                </div>
            </div>
        </header>
        
        <main class="dashboard-content" id="main-content" role="main">
            <section id="home-screen" class="screen active" aria-labelledby="home-title">
                <div class="container">
                    <h2 id="home-title" class="sr-only">Startseite</h2>
                    
                    <!-- Nächstes Training mit prominenter CTA -->
                    <section class="next-workout-card" aria-labelledby="next-workout-title">
                        <div class="card-content">
                            <h3 class="section-title" id="next-workout-title">Nächstes Training</h3>
                            <div class="workout-info">
                                <h4 class="workout-name" id="next-workout-name">Push day</h4>
                                <p class="workout-date" id="next-workout-date">Fri, Apr 26</p>
                            </div>
                        </div>
                        <button class="btn-primary btn-lg start-workout-btn btn-ripple" id="start-workout-btn" aria-label="Training starten">
                            <i class="fas fa-play" aria-hidden="true"></i>
                            Start Workout
                        </button>
                    </section>
                    
                    <!-- Letzte Workouts mit verbesserter visueller Hierarchie -->
                    <section class="card recent-workouts" aria-labelledby="recent-workouts-title">
                        <h3 class="section-title" id="recent-workouts-title">Letzte Workouts</h3>
                        
                        <div class="workout-list" id="last-workouts-list" role="list">
                            <!-- Workouts werden hier dynamisch eingefügt -->
                            <div class="empty-state" id="empty-workouts" aria-live="polite">
                                <div class="empty-state-icon">
                                    <i class="fas fa-dumbbell" aria-hidden="true"></i>
                                </div>
                                <h4 class="empty-state-title">Keine Workouts gefunden</h4>
                                <p class="empty-state-description">
                                    Starte dein erstes Workout, um deinen Fortschritt zu verfolgen.
                                </p>
                            </div>
                        </div>
                        
                        <button class="btn-tertiary view-all-btn" id="view-all-workouts-btn" aria-label="Alle Workouts anzeigen">
                            Alle Workouts anzeigen
                            <i class="fas fa-arrow-right" aria-hidden="true"></i>
                        </button>
                    </section>
                    
                    <!-- Fortschritt mit verbesserten Visualisierungen -->
                    <section class="card progress-section" aria-labelledby="progress-title">
                        <div class="section-header">
                            <h3 class="section-title" id="progress-title">Fortschritt</h3>
                            <span class="progress-percentage" id="progress-percentage" aria-live="polite">0% progress this week</span>
                        </div>
                        
                        <div class="progress-charts" id="progress-charts" aria-label="Wöchentliche Trainingsaktivität">
                            <!-- Fortschrittsdiagramm wird hier dynamisch eingefügt -->
                        </div>
                        
                        <button class="btn-tertiary view-stats-btn" id="view-stats-btn" aria-label="Detaillierte Statistiken anzeigen">
                            Detaillierte Statistiken
                            <i class="fas fa-arrow-right" aria-hidden="true"></i>
                        </button>
                    </section>
                </div>
            </section>
            
            <section id="new-workout-screen" class="screen" aria-labelledby="new-workout-title">
                <div class="container">
                    <div class="screen-header">
                        <button class="back-btn" data-target="home-screen" aria-label="Zurück zur Startseite">
                            <i class="fas fa-arrow-left" aria-hidden="true"></i>
                        </button>
                        <h2 id="new-workout-title">Neues Workout</h2>
                    </div>
                    
                    <form class="workout-form" id="workout-form" aria-label="Workout-Formular">
                        <div class="form-group">
                            <label for="workout-type" class="input-label">Workout Typ</label>
                            <select id="workout-type" class="select-field" required aria-required="true">
                                <option value="">Bitte wählen...</option>
                                <option value="Pushday">Pushday</option>
                                <option value="Pullday">Pullday</option>
                                <option value="Legday">Legday</option>
                                <option value="Full Body">Full Body</option>
                                <option value="Upper Body">Upper Body</option>
                                <option value="Lower Body">Lower Body</option>
                                <option value="Cardio">Cardio</option>
                            </select>
                            <div class="error-message" id="workout-type-error">Bitte wähle einen Workout-Typ aus</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="workout-name" class="input-label">Workout Name (optional)</label>
                            <input type="text" id="workout-name" class="input-field" placeholder="z.B. Push Day, Leg Day...">
                        </div>
                        
                        <div id="exercises-container" class="exercises-container" aria-live="polite">
                            <!-- Übungen werden hier dynamisch eingefügt -->
                            <div class="empty-state" id="empty-exercises">
                                <p class="empty-state-description">
                                    Füge Übungen hinzu, um dein Workout zu erstellen.
                                </p>
                            </div>
                        </div>
                        
                        <button type="button" id="add-exercise-btn" class="btn-secondary" aria-label="Übung hinzufügen">
                            <i class="fas fa-plus" aria-hidden="true"></i>
                            Übung hinzufügen
                        </button>
                        
                        <button type="submit" id="save-workout-btn" class="btn-primary btn-lg btn-block" aria-label="Workout speichern">Workout speichern</button>
                    </form>
                </div>
            </section>
            
            <section id="stats-screen" class="screen" aria-labelledby="stats-title">
                <div class="container">
                    <div class="screen-header">
                        <button class="back-btn" data-target="home-screen" aria-label="Zurück zur Startseite">
                            <i class="fas fa-arrow-left" aria-hidden="true"></i>
                        </button>
                        <h2 id="stats-title">Statistiken</h2>
                    </div>
                    
                    <div class="card">
                        <h3 class="section-title">Fortschritt nach Workout-Typ</h3>
                        <div id="workout-type-progress" class="stats-chart" aria-label="Fortschritt nach Workout-Typ Diagramm">
                            <!-- Statistiken werden hier dynamisch eingefügt -->
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3 class="section-title">Workout Häufigkeit</h3>
                        <div id="workout-frequency" class="stats-chart" aria-label="Workout Häufigkeit Diagramm">
                            <!-- Statistiken werden hier dynamisch eingefügt -->
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="groups-screen" class="screen" aria-labelledby="groups-title">
                <div class="container">
                    <div class="screen-header">
                        <button class="back-btn" data-target="home-screen" aria-label="Zurück zur Startseite">
                            <i class="fas fa-arrow-left" aria-hidden="true"></i>
                        </button>
                        <h2 id="groups-title">Gruppen</h2>
                    </div>
                    
                    <div id="groups-list" class="groups-list" role="list" aria-live="polite">
                        <!-- Gruppen werden hier dynamisch eingefügt -->
                        <div class="empty-state" id="empty-groups">
                            <div class="empty-state-icon">
                                <i class="fas fa-users" aria-hidden="true"></i>
                            </div>
                            <h3 class="empty-state-title">Keine Gruppen gefunden</h3>
                            <p class="empty-state-description">
                                Erstelle eine Gruppe, um deine Fortschritte mit Freunden zu teilen.
                            </p>
                        </div>
                    </div>
                    
                    <button id="create-group-btn" class="btn-primary btn-lg btn-block" aria-label="Neue Gruppe erstellen">
                        <i class="fas fa-plus" aria-hidden="true"></i>
                        Neue Gruppe erstellen
                    </button>
                </div>
            </section>
            
            <section id="reminders-screen" class="screen" aria-labelledby="reminders-title">
                <div class="container">
                    <div class="screen-header">
                        <button class="back-btn" data-target="home-screen" aria-label="Zurück zur Startseite">
                            <i class="fas fa-arrow-left" aria-hidden="true"></i>
                        </button>
                        <h2 id="reminders-title">Erinnerungen</h2>
                    </div>
                    
                    <div id="reminders-list" class="reminders-list" role="list" aria-live="polite">
                        <!-- Erinnerungen werden hier dynamisch eingefügt -->
                        <div class="empty-state" id="empty-reminders">
                            <div class="empty-state-icon">
                                <i class="fas fa-bell" aria-hidden="true"></i>
                            </div>
                            <h3 class="empty-state-title">Keine Erinnerungen gefunden</h3>
                            <p class="empty-state-description">
                                Erstelle Erinnerungen, um keine Trainingseinheit zu verpassen.
                            </p>
                        </div>
                    </div>
                    
                    <button id="add-reminder-btn" class="btn-primary btn-lg btn-block" aria-label="Neue Erinnerung erstellen">
                        <i class="fas fa-plus" aria-hidden="true"></i>
                        Neue Erinnerung
                    </button>
                </div>
            </section>
        </main>
        
        <nav class="bottom-nav" role="navigation" aria-label="Hauptnavigation">
            <a href="#" class="nav-tab active" data-screen="home-screen" aria-label="Home" aria-current="page">
                <i class="fas fa-home nav-tab-icon" aria-hidden="true"></i>
                <span class="nav-tab-text">Home</span>
            </a>
            <a href="#" class="nav-tab" data-screen="stats-screen" aria-label="Statistiken">
                <i class="fas fa-chart-bar nav-tab-icon" aria-hidden="true"></i>
                <span class="nav-tab-text">Stats</span>
            </a>
            <a href="#" class="nav-tab" data-screen="groups-screen" aria-label="Gruppen">
                <i class="fas fa-users nav-tab-icon" aria-hidden="true"></i>
                <span class="nav-tab-text">Gruppen</span>
            </a>
            <a href="#" class="nav-tab" data-screen="reminders-screen" aria-label="Erinnerungen">
                <i class="fas fa-bell nav-tab-icon" aria-hidden="true"></i>
                <span class="nav-tab-text">Erinnerungen</span>
            </a>
        </nav>
        
        <!-- Modals -->
        <div id="exercise-modal" class="modal" role="dialog" aria-labelledby="exercise-modal-title" aria-hidden="true">
            <div class="modal-content" role="document">
                <div class="modal-header">
                    <h3 id="exercise-modal-title">Übung hinzufügen</h3>
                    <button class="close-modal" aria-label="Schließen">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="exercise-form" aria-label="Übungs-Formular">
                        <div class="form-group">
                            <label for="exercise-name" class="input-label">Übungsname</label>
                            <input type="text" id="exercise-name" class="input-field" placeholder="z.B. Bankdrücken, Kniebeugen..." required aria-required="true">
                            <div class="error-message" id="exercise-name-error">Bitte gib einen Übungsnamen ein</div>
                        </div>
                        
                        <div id="sets-container" class="sets-container" aria-live="polite">
                            <!-- Sets werden hier dynamisch eingefügt -->
                        </div>
                        
                        <button type="button" id="add-set-btn" class="btn-secondary" aria-label="Set hinzufügen">
                            <i class="fas fa-plus" aria-hidden="true"></i>
                            Set hinzufügen
                        </button>
                        
                        <button type="submit" id="save-exercise-btn" class="btn-primary btn-block" aria-label="Übung speichern">Übung speichern</button>
                    </form>
                </div>
            </div>
        </div>
        
        <div id="reminder-modal" class="modal" role="dialog" aria-labelledby="reminder-modal-title" aria-hidden="true">
            <div class="modal-content" role="document">
                <div class="modal-header">
                    <h3 id="reminder-modal-title">Erinnerung erstellen</h3>
                    <button class="close-modal" aria-label="Schließen">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="reminder-form" aria-label="Erinnerungs-Formular">
                        <div class="form-group">
                            <label for="reminder-workout" class="input-label">Workout</label>
                            <select id="reminder-workout" class="select-field" required aria-required="true">
                                <option value="">Bitte wählen...</option>
                                <!-- Workouts werden hier dynamisch eingefügt -->
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="reminder-interval" class="input-label">Intervall (Tage)</label>
                            <input type="number" id="reminder-interval" class="input-field" min="1" value="2" required aria-required="true">
                        </div>
                        
                        <button type="submit" id="save-reminder-btn" class="btn-primary btn-block" aria-label="Erinnerung speichern">Erinnerung speichern</button>
                    </form>
                </div>
            </div>
        </div>
        
        <div id="group-modal" class="modal" role="dialog" aria-labelledby="group-modal-title" aria-hidden="true">
            <div class="modal-content" role="document">
                <div class="modal-header">
                    <h3 id="group-modal-title">Gruppe erstellen</h3>
                    <button class="close-modal" aria-label="Schließen">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="group-form" aria-label="Gruppen-Formular">
                        <div class="form-group">
                            <label for="group-name" class="input-label">Gruppenname</label>
                            <input type="text" id="group-name" class="input-field" placeholder="z.B. Fitness Buddies" required aria-required="true">
                        </div>
                        
                        <div class="form-group">
                            <label for="group-description" class="input-label">Beschreibung</label>
                            <textarea id="group-description" class="textarea-field" placeholder="Beschreibe deine Gruppe..."></textarea>
                        </div>
                        
                        <button type="submit" id="save-group-btn" class="btn-primary btn-block" aria-label="Gruppe speichern">Gruppe speichern</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Feedback-Elemente -->
    <div id="toast-container" class="toast-container" aria-live="polite"></div>
    <div id="loading-overlay" class="loading-overlay" aria-hidden="true">
        <div class="spinner"></div>
    </div>
    
    <!-- Scripts -->
    <script src="app.js"></script>
    <script>
        // Initialize app when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Check if app initialization function exists
            if (typeof initApp === 'function') {
                initApp();
            } else {
                console.error('App initialization function not found. Check if app.js is loaded correctly.');
                // Show error message to user
                const errorMessage = document.createElement('div');
                errorMessage.className = 'error-message global-error';
                errorMessage.textContent = 'Die Anwendung konnte nicht geladen werden. Bitte aktualisieren Sie die Seite oder versuchen Sie es später erneut.';
                document.body.appendChild(errorMessage);
            }
            
            // Setup navigation
            setupNavigation();
        });
        
        // Setup navigation
        function setupNavigation() {
            const navTabs = document.querySelectorAll('.nav-tab');
            const screens = document.querySelectorAll('.screen');
            
            navTabs.forEach(tab => {
                tab.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetScreen = this.getAttribute('data-screen');
                    
                    // Update active tab
                    navTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Update aria-current
                    navTabs.forEach(t => t.removeAttribute('aria-current'));
                    this.setAttribute('aria-current', 'page');
                    
                    // Show target screen
                    screens.forEach(screen => {
                        screen.classList.remove('active');
                        if (screen.id === targetScreen) {
                            screen.classList.add('active');
                        }
                    });
                });
            });
            
            // Back buttons
            const backButtons = document.querySelectorAll('.back-btn');
            backButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    const targetScreen = this.getAttribute('data-target') || 'home-screen';
                    
                    // Show target screen
                    screens.forEach(screen => {
                        screen.classList.remove('active');
                        if (screen.id === targetScreen) {
                            screen.classList.add('active');
                        }
                    });
                    
                    // Update active tab
                    navTabs.forEach(tab => {
                        tab.classList.remove('active');
                        if (tab.getAttribute('data-screen') === targetScreen) {
                            tab.classList.add('active');
                            tab.setAttribute('aria-current', 'page');
                        } else {
                            tab.removeAttribute('aria-current');
                        }
                    });
                });
            });
        }
        
        // Helper function to show screens
        function showScreen(screenId) {
            const screens = document.querySelectorAll('.screen');
            const navTabs = document.querySelectorAll('.nav-tab');
            
            screens.forEach(screen => {
                screen.classList.remove('active');
                if (screen.id === screenId) {
                    screen.classList.add('active');
                }
            });
            
            // Update active tab if it's a main screen
            if (['home-screen', 'stats-screen', 'groups-screen', 'reminders-screen'].includes(screenId)) {
                navTabs.forEach(tab => {
                    tab.classList.remove('active');
                    tab.removeAttribute('aria-current');
                    if (tab.getAttribute('data-screen') === screenId) {
                        tab.classList.add('active');
                        tab.setAttribute('aria-current', 'page');
                    }
                });
            }
        }
    </script>
</body>
</html>
